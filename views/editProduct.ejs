<%-include('./includes/header.ejs') %>

<%-include('./includes/nav.ejs') %>


<div class="container" style="width:40%; margin:0 auto;" >



  <h1><% if(edit) { %>
    Edit Product
    <% }else{ %>
      Add Product
  <% } %></h1>


  <% if(errorMessage) { %>
    <div class="text-center alert alert-danger" >
       <%= errorMessage%>
    </div>
  <% } %>

  <form 
  <% if(edit){ %>
    action="/admin/edit-product"
    <% }else{ %>
      action="/admin/add-product"
      <% } %>
      enctype="multipart/form-data"
  method="post">
  <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
      <div class="form-row">
        <div class="form-group col-md-12">
          <label for="name">Product Name</label>
          <input
          
          <% if(edit) { %>
            value = "<%= product.name %>"
          <% } %>
          
          type="text" name="name" class="form-control" id="name" placeholder="Product Name">
        </div>

      <div class="mb-3"></div>

        <div class="form-group col-md-12">
          <label for="price">Product Price</label>
          <input 
          <% if(edit) { %>
            value = "<%= product.price %>"
          <% } %>
          type="number" name="price" class="form-control" id="price" placeholder="Product Price">
        </div>

      <div class="mb-3"></div>

      <div class="form-group">
          <label for="image">Image</label>
          <input 
          type="file" name="image" class="form-control" id="image" placeholder="Image" required>
        </div>

        <div class="mb-3"></div>

      <div class="form-group">
        <label for="description">Product Description</label>
        <textarea 
        name="description"  class="form-control" id="description" placeholder="Decription"><% if(edit) { %><%= product.description %> <% } %></textarea>
      </div>
      
      <div class="mb-3"></div>
      
      <% if(edit) { %>
        <input type="hidden" name="id" value="<%= product._id %>">
        <% } %>

      <button type="submit" class="btn btn-dark">
        
        <% if(edit) { %>
          Edit Product
          <% }else{ %>
            Add Product
        <% } %>
        </button>
    </form>
</div>


<%-include('./includes/footer.ejs') %>
    